/* ===== CSS 变量定义 ===== */
:root {
  --primary: #4a9eff;
  --primary-rgb: 74, 158, 255;
  --accent: #ff7b4a;
  --accent-rgb: 255, 123, 74;
  --bg-card: #16213e;
  --text-primary: #ffffff;
  --text-secondary: #aaaaaa;
  --border: #0f3460;
  --success: #4ecca3;
  --success-rgb: 78, 204, 163;
  --warning: #ffd700;
  --warning-rgb: 255, 215, 0;
  --danger: #e94560;
  --danger-rgb: 233, 69, 96;
}

/* ===== 基础 ===== */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: -apple-system, "Microsoft YaHei", sans-serif;
  background: #1a1a2e;
  min-height: 100vh;
  padding: 20px;
  color: #eee;
}
.container {
  max-width: 1400px;
  margin: 0 auto;
  background: #16213e;
  border-radius: 16px;
  padding: 25px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
}
h1 { color: #e94560; margin-bottom: 10px; font-size: 24px; }
.problem-desc {
  color: #aaa; padding: 12px 15px; background: #0f3460;
  border-radius: 8px; border-left: 4px solid #e94560;
  margin-bottom: 20px; line-height: 1.8;
}
.problem-desc code {
  background: #1a1a2e; color: #4ecca3;
  padding: 2px 6px; border-radius: 4px; font-family: monospace;
}

/* ===== Tabs ===== */
.tabs { display: flex; gap: 5px; margin-bottom: 20px; }
.tab-btn {
  padding: 10px 20px; background: #0f3460; border: none;
  border-radius: 8px 8px 0 0; color: #aaa; cursor: pointer;
  font-size: 14px; font-family: inherit; transition: all 0.3s;
}
.tab-btn:hover { background: #1a4a7a; }
.tab-btn.active { background: #e94560; color: white; }
.tab-content { display: none; }
.tab-content.active { display: block; }

/* ===== 核心思路 ===== */
.core-idea {
  background: #0f3460; border-radius: 12px; padding: 20px;
  border-left: 4px solid #e94560; margin-bottom: 15px;
}
.core-idea h3 { color: #e94560; margin-top: 0; margin-bottom: 10px; }
.core-idea p, .core-idea li { color: #ccc; line-height: 1.8; }
.core-idea .formula {
  background: #1a1a2e; padding: 10px 15px; border-radius: 8px;
  font-family: monospace; color: #4ecca3; margin: 10px 0;
}
.core-idea .arrow { color: #ffd700; font-weight: bold; }
.core-idea .key { color: #4ecca3; font-weight: bold; }
.core-idea ul { padding-left: 20px; }
.step-title { color: #4a9eff; font-size: 16px; font-weight: bold; margin-bottom: 8px; }
.flow-chart {
  display: flex; align-items: center; gap: 10px;
  flex-wrap: wrap; justify-content: center; margin: 15px 0;
}
.flow-node {
  background: #1a1a2e; border: 2px solid #0f3460; border-radius: 10px;
  padding: 10px 16px; color: #eee; font-size: 13px; text-align: center;
  white-space: pre-line;
}
.flow-node.highlight-node { border-color: #e94560; color: #e94560; }
.flow-arrow { color: #4a9eff; font-size: 20px; }

/* ===== 对比表格 ===== */
.compare-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
.compare-table th, .compare-table td {
  padding: 12px; border-bottom: 1px solid #0f3460; text-align: left;
}
.compare-table th { background: #0f3460; color: #e94560; }
.compare-table tr:hover { background: #1a3a5c; }
.tag-good { color: #4ecca3; }
.tag-bad { color: #e94560; }
.tag-medium { color: #ffd700; }
.recommend-card {
  background: #0f3460; border-radius: 12px; padding: 15px 20px;
  border-left: 4px solid #4ecca3; margin-top: 15px;
}
.recommend-card h4 { color: #4ecca3; margin-bottom: 8px; }
.recommend-card p { color: #ccc; line-height: 1.6; }

/* ===== 解法子 Tab ===== */
.solution-tabs { display: flex; gap: 8px; margin-bottom: 15px; }
.solution-tab {
  padding: 8px 16px; background: #1a1a2e; border: 2px solid #0f3460;
  border-radius: 20px; color: #aaa; cursor: pointer; font-size: 13px;
  transition: all 0.3s; font-family: inherit;
}
.solution-tab:hover { border-color: #4a9eff; color: #4a9eff; }
.solution-tab.active { border-color: #e94560; background: #e94560; color: white; }
.complexity-badge {
  display: inline-block; padding: 4px 10px; border-radius: 12px;
  font-size: 12px; margin-left: 10px;
}
.complexity-badge.good { background: #1a3d2e; color: #4ecca3; }
.complexity-badge.bad { background: #3d1a2e; color: #e94560; }
.complexity-badge.medium { background: #3d3d1a; color: #ffd700; }
.solution-content { display: none; }
.solution-content.active { display: block; }

/* ===== 左右布局 ===== */
.split-layout { display: flex; gap: 20px; margin-top: 15px; }
.code-panel { flex: 0 0 45%; display: flex; flex-direction: column; }
.visualization-panel { flex: 1; display: flex; flex-direction: column; gap: 15px; }

/* ===== 代码区域 ===== */
.code-section {
  border: 1px solid #0f3460; border-radius: 12px; overflow: hidden;
  height: 100%; display: flex; flex-direction: column;
}
.code-header {
  padding: 8px 16px; background: #0f3460; display: flex;
  align-items: center; justify-content: space-between;
  border-bottom: 1px solid #1a4a7a;
}
.lang-tabs { display: flex; gap: 4px; }
.lang-tab {
  padding: 4px 14px; background: transparent; border: 1px solid #1a4a7a;
  border-radius: 6px; color: #888; cursor: pointer; font-size: 12px;
  font-family: inherit; transition: all 0.2s;
}
.lang-tab:hover { color: #ccc; border-color: #4a9eff; }
.lang-tab.active { background: #4a9eff; color: white; border-color: #4a9eff; }
.copy-btn {
  padding: 4px 12px; background: transparent; border: 1px solid #1a4a7a;
  border-radius: 6px; color: #888; cursor: pointer; font-size: 12px;
  font-family: inherit; transition: all 0.2s; display: flex;
  align-items: center; gap: 4px;
}
.copy-btn:hover { color: #4ecca3; border-color: #4ecca3; }
.copy-btn.copied { color: #4ecca3; border-color: #4ecca3; }
.code-container { flex: 1; overflow-y: auto; background: #0f0f1a; }
.lang-code { display: none; }
.lang-code.active { display: block; }
.code-line { display: flex; padding: 3px 0; transition: background 0.3s; }
.code-line.highlight { background: #3d3d00; border-left: 3px solid #ffd700; }
.code-line.highlight-green { background: #1a3d1a; border-left: 3px solid #4ecca3; }
.line-number {
  min-width: 45px; text-align: right; padding-right: 15px; color: #666;
  background: #0a0a12; user-select: none;
  font-family: 'Courier New', monospace; font-size: 13px; line-height: 1.5;
}
.line-content {
  padding: 0 12px; color: #d4d4d4;
  font-family: 'Courier New', monospace; font-size: 13px;
  line-height: 1.5; white-space: pre;
}
.keyword { color: #569cd6; }
.type { color: #4ecca3; }
.method { color: #dcdcaa; }
.number { color: #b5cea8; }
.comment { color: #6a9955; }
.string { color: #ce9178; }

/* ===== 数组可视化 ===== */
.array-container {
  display: flex; gap: 8px; justify-content: center;
  flex-wrap: wrap; padding: 15px 0;
}
.array-item {
  width: 55px; height: 55px; display: flex; align-items: center;
  justify-content: center; border: 2px solid #0f3460; border-radius: 8px;
  background: #1a1a2e; position: relative; transition: all 0.4s;
  font-size: 18px; font-weight: bold;
}
.array-item .index {
  position: absolute; top: -18px; font-size: 11px;
  color: #666; font-weight: normal;
}
.array-item .pointer {
  position: absolute; bottom: -22px; font-size: 12px; font-weight: bold;
}
.array-item.current { border-color: #e94560; background: #3d1a2e; transform: scale(1.1); }
.array-item.found { border-color: #4ecca3; background: #1a3d2e; }
.array-item.checking { border-color: #ffd700; background: #3d3d1a; }
.array-item.swapping { border-color: #4a9eff; background: #1a2e4a; }
.array-item.sorted { border-color: #4ecca3; background: #1a3d2e; }
.array-item.descending { border-color: #e94560; background: rgba(233,69,96,0.15); }
.array-item.in-hash { border-color: #4a9eff; background: #1a2e4a; }
.pointer-i { color: #e94560; }
.pointer-j { color: #4a9eff; }
.pointer-k { color: #4ecca3; }

/* ===== 哈希表可视化 ===== */
.hash-container {
  display: flex; flex-direction: column; gap: 6px;
  min-height: 60px; padding: 12px; background: #0f3460; border-radius: 8px;
}
.hash-item {
  display: flex; align-items: center; gap: 10px;
  padding: 6px 12px; background: #1a2e4a; border-radius: 6px;
  animation: slideIn 0.3s;
}
.hash-item .key { color: #4a9eff; font-weight: bold; }
.hash-item .value { color: #ccc; }

/* ===== 控制按钮 ===== */
.controls {
  display: flex; justify-content: center; gap: 12px;
  padding: 15px; background: #0f3460; border-radius: 12px;
}
.controls button {
  padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer;
  display: flex; align-items: center; gap: 6px;
  font-family: inherit; font-size: 13px; transition: all 0.2s;
}
.controls button:hover { transform: scale(1.05); }
.btn-prev, .btn-next { background: #4a9eff; color: white; }
.btn-play { background: #4ecca3; color: #1a1a2e; }
.btn-reset { background: #e94560; color: white; }

/* ===== 解释区域 ===== */
.explanation {
  padding: 18px; background: #0f3460; border-radius: 12px;
  line-height: 1.8; color: #ccc; border-left: 4px solid #e94560;
  min-height: 60px;
}
.explanation .hl {
  background: #3d3d00; color: #ffd700; padding: 2px 6px; border-radius: 4px;
}
.explanation .success {
  background: #1a3d2e; color: #4ecca3; padding: 2px 6px; border-radius: 4px;
}
.explanation code {
  background: #1a1a2e; color: #4ecca3; padding: 2px 6px;
  border-radius: 4px; font-family: monospace;
}

/* ===== 动画 ===== */
@keyframes slideIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}
.swap-anim { animation: pulse 0.5s; }
